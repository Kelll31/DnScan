
[Banner]: https://github.com/Kelll31/SubScanPy/blob/main/img/usage.png?raw=true "Usage example"

SubScanPy
======

SubScanPy - это сканер поддоменов DNS на основе списка слов на языке python.

Сначала скрипт попытается выполнить перенос зоны, используя каждый из серверов имен целевого домена.

Если это не удастся, программа выполнит поиск записей TXT и MX для домена, а затем выполнит рекурсивное сканирование поддомена, используя предоставленный список слов.

Usage
-----

![Banner]

$ SubScanPy.py (-d \<domain\> | -l \<list\>) [OPTIONS]

#### Обязательные аргументы
    -d  --domain                              Целевой домен; ИЛИ
    -l  --list                                Файл с доменами для сканирования, разделенными новой строкой
    
#### Опциональные аргументы
    -w --wordlist <wordlist>                  Словарь поддоменов для использования
    -t --threads <threadcount>                Количество потоков (1 - 32), по умолчанию 8
    -6 --ipv6                                 Сканировать записи IPv6 (AAAA)
    -z --zonetransfer                         Выполнить перенос зоны и выйти
    -r --recursive                            Рекурсивно сканировать поддомены
    --recurse-wildcards                       Рекурсивно сканировать подстановочные знаки (медленно)

    -m --maxdepth                             Максимальное количество уровней для рекурсивного сканирования
    -a --alterations                          Сканировать изменения поддоменов (медленно)
    -R --resolver <resolver>                  Использовать указанный резолвер вместо системного по умолчанию
    -L --resolver-list <file>                 Прочитать список резолверов из файла
    -T --tld                                  Сканировать домен во всех доменных зонах верхнего уровня (TLD)
    -o --output <filename>                    Вывод в текстовый файл
    -i --output-ips <filename>                Вывод обнаруженных IP-адресов в текстовый файл
    -n --nocheck                              Не проверять серверы имен перед сканированием. Полезно в изолированных сетях
    -q --quick                                Выполнять только перенос зоны и сканирование поддоменов. Подавляет большинство выводов в файл с помощью -o
    -N --no-ip                                Не выводить IP-адреса в результатах
    -v --verbose                              Подробный вывод
    -h --help                                 Показать текст помощи

Пользовательские точки вставки можно задать, добавив "%%" в доменное имя, например:

```
$ SubScanPy.py -d dev-%%.example.org
```

Wordlists
---------

Несколько списков слов поставляются вместе с SubScanPy.

Первые четыре (**subdomains-100.txt**, **subdomains-500.txt**, **subdomains-1000.txt** и **subdomains-10000.txt**) были созданы путем анализа наиболее часто встречающихся подобластей примерно в 86 000 файлах зон, которые были переданы в рамках отдельного исследовательского проекта. Эти списки слов отсортированы по популярности поддоменов (точнее, по проценту зон, которые содержали их в наборе данных).

Окончательный (и используемый по умолчанию) список слов (**subdomains.txt**) основан на лучших поддоменах по популярности, но в него был внесен ряд дополнений вручную на основе доменов, выявленных в ходе тестирования.

Этот список отсортирован в алфавитном порядке и в настоящее время содержит приблизительно **770** записи.


Сканирование TLD
------------
Параметр -T (--tld) можно использовать для поиска всех TLD, в которых существует конкретное доменное имя. По умолчанию будет использоваться **tlds.txt** список, содержащий все TLD, перечисленные IANA (включая новые TLD). Вы также можете указать пользовательский список слов с помощью -w. Прилагаемый файл **suffixes.txt** представляет собой сокращенную версию общедоступного списка суффиксов, поэтому он будет включать большинство доменов второго уровня (таких как co.uk).

Обратите внимание, что при использовании этой опции вам следует указывать только базу доменного имени ("github" и "github.com").

Изменения
-----------
Переключатель "-a"/"--alternations" добавляет различные префиксы и суффиксы (такие как "dev", "test", "01" и т.д.) к доменам, как с дефисами, так и без них. Это приводит к большому количеству дополнительных перестановок (примерно 60 перестановок на домен), поэтому выполняется намного медленнее, особенно при использовании больших списков слов.


Установка
-----

Для работы с SubScanPy требуется Python 3 и библиотеки netaddr (версии 0.7.19 или выше) и dnspython (версии 2.0.0 или выше).

Для установки зависимостей выполните следующую команду:

    $ pip install -r requirements.txt
